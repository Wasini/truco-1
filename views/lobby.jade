extends layout

block content
  h1(class="header") Lobby
  
  #left-column.column
    h3 #{user.username}
      br
      div(class="group-vertical")
        br
        a(href="/lobby/newgame")
          button.btn.btn-primary(type="submit") NewGame
        br
        a(href="/")
          button.btn.btn-primary(type="button") Return
  


  script(src="/socket.io/socket.io.js")
  script(src="https://code.jquery.com/jquery-1.10.2.js")
  
  script.
    var socket = io();
    var games=[];
    
    function updateGames(gameList) {
        games=gameList;
        var g = document.getElementById("game");
        gameList.forEach(load);
        function load(item,index) {
            g.innerHTML = g.innerHTML+'<button type="button" class="btn btn-primary" value="'+gameList[index].id.toString()+'">'+gameList[index].name+'</button></a><br />'
        }
    }
    
    $( document ).ready(function() {
        $( ".btn btn-primary" ).click(function() {
            window.alert("hole")
            console.log("hola");
        });
        socket.emit('load games', {id: socket.id });
    });
    
    
    socket.on('load games successful',function (data) {
        updateGames(data.list)
    })
    
    
    socket.on("new game",function (data) {
        updateGames(data.list)
    })
    
  #right-column.column
    form(role='form',method="post", style='max-width: 300px;')
      .form-group
        a(id = "game")
